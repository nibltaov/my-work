class Menu{constructor({btn:a,content:b,activeClass:c,btnActiveClass:d}){this.btn=document.querySelector(a),this.content=document.querySelector(b),this.contentName=b,this.btnName=a,this.activeClass=c??"active",this.btnClass=d??"active",globalThis.onclick=a=>this.close(a)}open(){this.content.classList.contains(this.activeClass)||(this.content.classList.add(this.activeClass),this.btn.classList.add(this.btnClass))}close(a){this.content.classList.contains(this.activeClass)&&a.target!=this.btn&&a.target.closest(this.btnName)!=this.btn&&a.target!=this.content&&a.target.closest(this.contentName)!=this.content?(this.content.classList.remove(this.activeClass),this.btn.classList.remove(this.btnClass)):(a.target===this.btn||a.target.closest(this.btnName)===this.btn)&&this.open()}}new Menu({btn:".header__nav-btn",content:".header__list",activeClass:"show",btnActiveClass:"active"});class Slider{constructor(a){this.slider=document.querySelector(a.slider);const b=a.inner??`${a.slider}__line`;if(this.sliderLine=this.slider.querySelector(b),this.slides=[...this.sliderLine.children],this.btns=[...this.slider.querySelectorAll(".slider__controls-btn")],this.btns.forEach(a=>{const b=a.getAttribute("data-arrow");this[b]=a}),this.dir="X"===a.direction.toUpperCase()?"X":"Y",this.timeMove=null!=a.time||200<=a.time?a.time:1e3,this.width=this.size().w,this.height=this.size().h,this.activeSlide=0,this.interval=isNaN(a.interval)||a.interval<=this.timeMove?this.timeMove+500:a.interval,a.autoplay){let a=setInterval(()=>{this.move(this.next)},this.interval);this.slider.onmouseenter=()=>clearInterval(a),this.slider.onmouseleave=()=>a=setInterval(()=>{this.move(this.next)},this.interval)}window.onresize=this.slider.onresize=document.body.onresize=()=>this.resize(),this.genPosition(),this.btn=a.btn??!0,this.btn&&(this.next.onclick=()=>this.move(this.next),this.prev.onclick=()=>this.move(this.prev))}size(){return{w:this.sliderLine.clientWidth,h:this.slider.clientHeight}}resize(){this.width=this.size().w,this.height=this.size().h,this.genPosition()}genPosition(){this.moveSize="X"===this.dir?this.width:this.height,this.sliderLine.style=`position: relative;
                                 height: ${this.height}px;
                                 overflow: hidden;`,this.slides.forEach((a,b)=>{const c=a;c.style=`position: absolute;
                           width: ${this.width}px;
                           height: ${this.height}px;`,b!=this.activeSlide&&(c.style.transform=`translate${this.dir}(${this.moveSize}px)`);const d=0===this.activeSlide?this.slides.length-1:b-1;d===b&&(c.style.transform=`translate${this.dir}(${-this.moveSize}px)`),b===this.activeSlide&&this.slides[this.activeSlide].classList.add("active")})}move(a){// this.next.disabled = this.prev.disabled = true
// setTimeout(() => {
//     this.next.disabled = this.prev.disabled = false
// }, this.timeMove)
const b=a===this.next?-1*this.moveSize:this.moveSize;/* Движение элементов */this.slides.forEach((a,c)=>{a.style.transition="0ms",c!=this.activeSlide&&(a.style.transform=`translate${this.dir}(${-1*b}px)`)}),this.slides[this.activeSlide].style.transform=`translate${this.dir}(${b}px)`,this.slides[this.activeSlide].style.transition=`${this.timeMove}ms`,this.slides[this.activeSlide].classList.remove("active"),this.next===a?(this.activeSlide++,this.activeSlide>=this.slides.length&&(this.activeSlide=0)):this.prev===a&&(this.activeSlide--,0>this.activeSlide&&(this.activeSlide=this.slides.length-1)),this.slides[this.activeSlide].style.transform=`translate${this.dir}(${0}px)`,this.slides[this.activeSlide].style.transition=`${this.timeMove}ms`,this.slides[this.activeSlide].classList.add("active")}}const slider=new Slider({slider:".header-banner",inner:".header-banner__inner",direction:"y",time:1e3,autoplay:!0,interval:5e3,btn:!1});class Theme{constructor(){this.el=document.querySelector(".header__nav-logo");const a=!0===matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";this.defaultTheme=localStorage.theme=localStorage.theme??a,this.change(),this.el.addEventListener("click",a=>{a.preventDefault(),this.change(!0)})}change(a){a&&(localStorage.theme="dark"===localStorage.theme?"light":"dark"),style.setAttribute("href",`/style/${localStorage.theme}.css`)}}new Theme;class Cap{constructor(a){this.els=[...document.querySelectorAll(a.el)],this.els.forEach(a=>{a.onclick=()=>this.openClose(a)})}openClose(a){if(this.els.forEach(b=>{if(a!==b){b.parentElement.classList.remove("show"),b.nextElementSibling.style.height=0,b.classList.remove("show");const a=b.querySelector(".cap__stack-arrow_pic"),c=a.getAttribute("src");a.setAttribute("src",c.replace("_close",""))}}),!a.classList.contains("show")){const b=a.parentElement,c=b.querySelector(".cap__stack-desc"),d=c.clientHeight;b.classList.add("show"),a.nextElementSibling.style.height=`${d}px`,a.classList.add("show");const e=a.querySelector(".cap__stack-arrow_pic"),f=e.getAttribute("src"),g=f.split(".");e.setAttribute("src",g.join("_close."))}else{a.parentElement.classList.remove("show"),a.nextElementSibling.style.height=0,a.classList.remove("show");const b=a.querySelector(".cap__stack-arrow_pic"),c=b.getAttribute("src");b.setAttribute("src",c.replace("_close",""))}}}new Cap({el:".cap__stack-head"});class QueryElement{constructor(a){this.el=[],a.el.forEach(a=>{const b=document.querySelector(a),c=b.innerHTML;b.innerHTML="",this.el.push({el:b,template:c})});try{const b=a.data();this.link=b.link,this.hide=document.querySelector(b.hide)}catch(a){throw new TypeError("You are not create method data()")}if(a.methods)for(const b in a.methods)Object.defineProperty(this.__proto__,b,{enumerable:!1,value:a.methods[b]})}}class GetData extends QueryElement{constructor(a){super(a),this.fetch()}async fetch(){try{const a=await fetch(this.link),b=await a.json();this.event=[],"object"!=typeof b||Array.isArray(b)?Array.isArray(b)&&b.forEach(a=>{this.el.forEach(b=>{const c=this.parser(a,b.el,b.template);c&&this.event.push(...c)})}):this.el.forEach(a=>{const c=this.parser(b,a.el,a.template);c&&this.event.push(...c)}),this.event.forEach((a,b)=>{a.el[`on${a.event}`]=c=>this[a.method](c,a.el,b)}),this.hide.remove()}catch(a){throw new Error(a)}}parser(a,b,c){const d=c.match(/{{([\s\S]+?)}}/g);d.forEach(b=>{const d=b.replace(/[{}]/g,"").trim();c=c.replace(b,a[d])}),b.insertAdjacentHTML("beforeend",c),b.classList.remove("hide");const e=c.match(/(\@\S+="\S+")/g);if(e){const a=[];return e.forEach(c=>{const d={},e=c.match(/\w+/g);d.event=e[0],d.method=e[1];const f=[...b.children].pop(),g=[...f.children];if(f.attributes[`@${e[0]}`])d.el=f,a.push(d);else for(let b=0;b<g.length;b++)if(g[b].attributes[`@${e[0]}`]){d.el=g[b],a.push(d);break}}),a}return!1}}const fetchWorks=new GetData({el:[".work__tab-list",".work__tab-container"],data(){return{link:"/db/db.json",hide:".work__tab-preloader"}},methods:{tabs(a,b){a.preventDefault(),this.el[1].el.classList.add("active");const c=this.el[0].el,d=[...c.querySelectorAll("a")];d.forEach(a=>{a.classList.remove("active")});const e=d.indexOf(b);b.classList.add("active");const f=[...this.el[1].el.children];f.forEach((a,b)=>{b===e?a.classList.add("active"):a.classList.remove("active")})}}});